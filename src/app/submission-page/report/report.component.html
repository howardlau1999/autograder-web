<h2>测试报告</h2>
<div class="report-container" *ngIf="testcases$ | async as testcases; else errorMsg">
  <mat-accordion class="testcase-accordion" multi>
    <mat-expansion-panel #testcase class="testcase-panel" *ngFor="let testcase of testcases; index as i">
      <mat-expansion-panel-header>
        <mat-panel-title>
                <span
                  [class]="testcase.getScore() === testcase.getMaxScore()?'green-font' : 'red-font'">{{testcase.getName()}}
                  ({{testcase.getScore()}}/{{testcase.getMaxScore()}})
                </span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <code>
        <pre class="testcase-output">{{testcase.getOutput()}}</pre>
      </code>
    </mat-expansion-panel>
  </mat-accordion>
  <mat-nav-list class="testcase-list">
    <a (click)="scrollTo(i)" mat-list-item
       *ngFor="let testcase of testcases; index as i">
          <span
            [class]="testcase.getScore() === testcase.getMaxScore()?'green-font' : 'red-font'">{{testcase.getName()}}
            ({{testcase.getScore()}}/{{testcase.getMaxScore()}})
          </span>
    </a>
  </mat-nav-list>
</div>
<ng-template #errorMsg>
  <div class="report-container" [ngSwitch]="error">
    <div style="width: 100%">
      <mat-card *ngSwitchCase="'RUNNING'">
        <mat-card-title>测试运行中…</mat-card-title>
        <p></p>
        <mat-progress-bar mode="buffer"></mat-progress-bar>
      </mat-card>
      <mat-card *ngSwitchDefault><mat-progress-bar></mat-progress-bar></mat-card>
    </div>
  </div>
</ng-template>
